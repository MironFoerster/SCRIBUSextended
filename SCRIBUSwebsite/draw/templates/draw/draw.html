{% extends 'base/base.html' %}

{% block beforeloadscript %}
const menu_url = {% url 'home:index' %}
{% endblock %}

{% block body %}
<div id="main-grid" data-state="draw_sub">
    <div id="draw-sub" class="subpage">
        <div id="left-ctrl-pane" class="draw-ctrl-pane">
            <input type="radio" name="draw_ctrl" id="scribe" onclick="manageDrawCtrl(event)" value="scribe">
            <label for="scribe" class="draw-ctrl-btn">
                <img class="icon" src="{% static 'imgs/scribe.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/scribe_checked.svg' %}">
            </label>
            <div id="scribe-overlay" class="overlay">
                <div id="scribe-generate-sub">
                    <textarea id="scribe-text-input" name="scribe-text-input" placeholder="Here goes the text you want SCRIBUS to write!"></textarea>
                    <div id="generate-btn" onclick="generateHandwriting(event)">GENERATE</div>
                </div>
                <div id="scribe-adjust-sub">
                    <canvas id="adjust-cvs" width=1000 height=1000></canvas>
                    <input type="range" id="ratio-range" name="ratio-range" min="0" max="100">
                    <div id="align-ctrl">
                        <input type="radio" name="align" id="left-radio" onclick="switchAlignment(event)" value="left" checked>
                        <label for="left-radio">LEFT</label>
                        <br>
                        <input type="radio" name="align" id="center-radio" onclick="switchAlignment(event)" value="center">
                        <label for="center-radio">CENTER</label>
                        <br>
                        <input type="radio" name="align" id="right-radio" onclick="switchAlignment(event)" value="right">
                        <label for="right-radio">RIGHT</label>
                        <br>
                    </div>
                </div>
            </div>

            <input type="radio" name="draw_ctrl" id="shapes" onclick="manageDrawCtrl(event)" value="shapes">
            <label for="shapes" class="draw-ctrl-btn">
                <img class="icon" src="{% static 'imgs/shapes.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/shapes_checked.svg' %}">
            </label>
            <div id="shapes-overlay" class="overlay">
                <div class="shadowbox"></div>
                <div class="scrollbox">
                    {% for shape in shapes.all %}
                        <canvas id="{{ shape.name }}-shape" class="card-cvs shape-card-cvs" width=1000 height=1000 data-state="default" onload="drawShapeCanvas('{{ shape.name }}-shape', {{ shape.elements.elements|safe }})"></canvas>
                    {% endfor %}
                </div>
            </div>

            <input type="radio" name="draw_ctrl" id="galery" onclick="manageDrawCtrl(event)" value="galery">
            <label for="galery" class="draw-ctrl-btn">
                <img class="icon" src="{% static 'imgs/galery.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/galery_checked.svg' %}">
            </label>
            <div id="galery-overlay" class="overlay">
                <div class="shadowbox"></div>
                <div class="scrollbox">
                    {% for design in designs.all %}
                        <div id="card-layer-grid">
                            <canvas id="{{ design.name }}-design" class="card-cvs design-card-cvs" width=1000 height=1000 data-state="default" onload="drawDesignCanvas('{{ design.name }}-design', {{ design.elements.elements|safe }})"></canvas>
                            <div id="card-overlay" data-state="off">{{ design.name }}</div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <canvas id="main-cvs" width=1000 height=1000></canvas>

        <div id="right-ctrl-pane" class="draw-ctrl-pane">
            <input type="radio" name="draw_ctrl" id="pen" onclick="manageDrawCtrl(event)" value="pen">
            <label for="pen" class="draw-ctrl-btn">
                <img class="icon" src="{% static 'imgs/pen.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/pen_checked.svg' %}">
            </label>

            <input type="radio" name="draw_ctrl" id="pointer" onclick="manageDrawCtrl(event)" value="pointer" checked>
            <label for="pointer" class="draw-ctrl-btn">
                <img class="icon" src="{% static 'imgs/pointer.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/pointer_checked.svg' %}">
            </label>

            <div id="cancel" class="draw-okcancel-btn" onclick="manageDrawCtrl(event)" data-state="default">
                <img class="icon" src="{% static 'imgs/cancel.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/cancel_checked.svg' %}">
            </div>

            <div id="ok" class="draw-okcancel-btn" onclick="manageDrawCtrl(event)" data-state="default">
                <img class="icon" src="{% static 'imgs/ok.svg' %}">
                <img class="icon-checked" src="{% static 'imgs/ok_checked.svg' %}">
            </div>

        </div>

    </div>

    <div id="finish-sub" class="subpage">

        <div id="left-finish-pane">
            <div id="draw-title">TITLE</div>
            <canvas id="finish-cvs" width=1000 height=1000></canvas>
            <img id="back-btn" src="{% static 'imgs/back.svg' %}" onclick="showBackOptions(event)">
        </div>

        <div id="vl"></div>

        <div id="right-finish-pane">
            <div id="nameit">NAME IT</div>
            <input type="text" id="title-input" name="title-input" placeholder="BeautifulDrawing" oninput="updateNameWarning(event, {{ all_designnames|safe }}); updateTitle(event);">
            <p id="name-warning">min 4 letters</p>
            <div id="saveit">SAVE IT</div>
            <div id="save-btn" onclick="saveNamedDesign(event)" data-state="save">SAVE</div>
            <div id="getit">GET IT</div>
            <div id="getit-flex">
                <div id="download-btn" onclick="downloadNamedDesign(event)" data-state="download">
                    <img src="{% static 'imgs/download.svg' %}">
                    PNG
                </div>
                <div id="robot-draw-btn" onclick="sendDesignToRobot(event)" data-state="send">
                    ROBOT-DRAW
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block scriptsource %}
{% load static %}
{% static 'base/js/draw.js' %}
{% endblock %}